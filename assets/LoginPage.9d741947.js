import{_ as L,d as P,u as I,r as f,a as U,b as D,c as i,e as r,t as m,F as c,w as v,v as x,f as a,g as b,h as w,i as $,j as B,p as M,k as N,l as E,m as T,S as j,n as q,o as n,q as _,s as A,x as z}from"./index.c38a28a7.js";var K="/test-pwa/assets/login.ca825f49.svg";const F=g=>(M("data-v-7c4fd7dc"),g=g(),N(),g),O={class:"bg",h:"screen",bg:"repeat",display:"flex justify-center items-center"},R={w:"869px",bg:"dark-100",shadow:"main",p:"y-96px x-50px",display:"flex justify-between",border:"2 dark-500"},W=F(()=>r("img",{alt:"login background",src:K},null,-1)),G={action:".",display:"flex flex-col",text:"center"},H=F(()=>r("h1",{leading:"text",text:"60px primary",font:"paytone bold"},"MetaWall pwa 13",-1)),J={m:"b-9",text:"24px dark-500",font:"helvetica bold"},Q={m:"b-4",text:"14px danger"},X=["disabled","onClick"],Y=E(" \u767B\u5165 "),Z=["disabled","onClick"],ee=E(" \u8A3B\u518A "),te=P({setup(g){const y=T(),u=I(),d=f(!0),h=f(""),e=U({name:"",email:"",password:""}),C={name:{required:_,minLength:A(2)},email:{required:_,email:z},password:{required:_,minLength:A(8)}},o=D(C,e),k=()=>{d.value=!d.value,o.value.$reset(),h.value="",e.name="",e.email="",e.password=""},S=async()=>{try{if(!e.name||!e.email||!e.password)throw new Error("\u4E0A\u8FF0\u6B04\u4F4D\u6709\u8AA4\uFF01");if(!await o.value.$validate())return;const s={name:e.name,email:e.email,password:e.password},p=await u.signUp(s);localStorage.setItem(j.ACCESSTOKEN,p.data.token),await y.push({name:"Post"})}catch(l){h.value=l.message}},V=async()=>{try{if(!e.email||!e.password)throw new Error("\u4E0A\u8FF0\u6B04\u4F4D\u6709\u8AA4\uFF01");const l=await o.value.email.$validate(),s=await o.value.password.$validate();if(!l||!s)return;const p={email:e.email,password:e.password};await u.login(p),await y.push({name:"Post"})}catch(l){h.value=l.message}};return(l,s)=>{const p=q("font-awesome-icon");return n(),i("div",O,[r("div",R,[W,r("div",null,[r("form",G,[H,r("h2",J,m(d.value?"\u5230\u5143\u5B87\u5B99\u5C55\u958B\u5168\u65B0\u793E\u4EA4\u5708":"\u8A3B\u518A"),1),d.value?w("",!0):(n(),i(c,{key:0},[v(r("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a(e).name=t),type:"text",w:"373px",h:"51px",border:"2 dark-500",m:"b-4",placeholder:"\u66B1\u7A31",onBlur:s[1]||(s[1]=(...t)=>a(o).name.$touch&&a(o).name.$touch(...t))},null,544),[[x,a(e).name]]),(n(!0),i(c,null,b(a(o).name.$errors,t=>(n(),i("span",{key:t.$uid,m:"b-4 -t-2",text:"14px danger left"},m(t.$message),1))),128))],64)),v(r("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>a(e).email=t),type:"text",w:"373px",h:"51px",border:"2 dark-500",m:"b-4",placeholder:"Email",onBlur:s[3]||(s[3]=(...t)=>a(o).email.$touch&&a(o).email.$touch(...t))},null,544),[[x,a(e).email]]),(n(!0),i(c,null,b(a(o).email.$errors,t=>(n(),i("span",{key:t.$uid,m:"b-4 -t-2",text:"14px danger left"},m(t.$message),1))),128)),v(r("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>a(e).password=t),type:"password",w:"373px",h:"51px",border:"2 dark-500",m:"b-8",placeholder:"Password",onBlur:s[5]||(s[5]=(...t)=>a(o).password.$touch&&a(o).password.$touch(...t))},null,544),[[x,a(e).password]]),(n(!0),i(c,null,b(a(o).password.$errors,t=>(n(),i("span",{key:t.$uid,m:"b-4 -t-6",text:"14px danger left"},m(t.$message),1))),128)),r("span",Q,m(h.value),1),d.value?(n(),i(c,{key:1},[d.value?(n(),i("button",{key:0,transition:"duration-base",type:"submit",bg:"primary hover:active",p:"y-4",m:"b-4",text:"white hover:dark-500",border:"2 dark-500 rounded-8px",disabled:a(u).loading.auth,onClick:$(V,["prevent"])},[Y,a(u).loading.auth?(n(),B(p,{key:0,icon:["fa","circle-notch"],pulse:"",size:"lg",m:"l-2"})):w("",!0)],8,X)):w("",!0),r("span",{cursor:"pointer",text:"center",display:"block",onClick:k}," \u8A3B\u518A\u5E33\u865F ")],64)):(n(),i(c,{key:2},[r("button",{type:"submit",transition:"duration-base",bg:"primary hover:active",p:"y-4",m:"b-4",text:"white hover:dark-500",border:"2 dark-500 rounded-8px",disabled:a(u).loading.auth,onClick:$(S,["prevent"])},[ee,a(u).loading.auth?(n(),B(p,{key:0,icon:["fa","circle-notch"],pulse:"",size:"lg",m:"l-2"})):w("",!0)],8,Z),r("span",{cursor:"pointer",text:"center",display:"block",onClick:k}," \u767B\u5165 ")],64))])])])])}}});var se=L(te,[["__scopeId","data-v-7c4fd7dc"]]);export{se as default};
